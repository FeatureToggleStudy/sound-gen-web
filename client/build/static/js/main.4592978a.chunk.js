(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{241:function(t,e,a){},251:function(t,e,a){"use strict";a.r(e);var n=a(1),s=a.n(n),i=a(19),o=a.n(i),r=(a(90),a(20)),_=a(10),c=a(22),l=a(21),u=a(23),h=a(84),d=a.n(h),p=a(50),v=a(11),f=a(41),m=a.n(f),g=a(49),k=a(79),y=a.n(k),S=a(77),E=a.n(S),b={wrapper:{margin:"auto",maxWidth:700},slider:{padding:"22px 0px",margin:"auto",maxWidth:600,touchAction:"none"},label:{color:"white"}},w=function(t){function e(t){var a;return Object(r.a)(this,e),(a=Object(c.a)(this,Object(l.a)(e).call(this,t))).handleChange=function(t,e){a.setState({value:e}),a.props.handleChange({pitch:e})},a.state={value:60},a}return Object(u.a)(e,t),Object(_.a)(e,[{key:"render",value:function(){var t=s.a.createElement("div",null,s.a.createElement(E.a,{id:"label",style:b.label},"Pitch"),s.a.createElement(y.a,{style:b.slider,value:this.state.value,min:this.props.min,max:this.props.max,step:this.props.step,onChange:this.handleChange}));return s.a.createElement("div",{style:b.wrapper},t)}}]),e}(n.Component),M=Object(g.withStyles)(b)(w),P=a(80),R=a(9),W={wrapper:{maxWidth:700,margin:"auto"},sketchArea:{border:"1px solid white",maxWidth:600,height:400,margin:"auto"},soundLeft:{fontSize:16,textAlign:"left",padding:10},soundRight:{fontSize:16,textAlign:"right",padding:10}},x=function(t){function e(t){var a;return Object(r.a)(this,e),(a=Object(c.a)(this,Object(l.a)(e).call(this,t))).state={updateInterval:500,notConfiguredText:"Not Configured",currentPosX:0,currentPosY:0,targetPosX:0,targetPosY:0,currentPercentX:0,currentPercentY:0,canvasWidth:0,canvasHeight:0,easing:.06,circleRadius:30,isMoving:!1,sentLastPos:!1,soundNW:"",soundNE:"",soundSW:"",soundSE:"",isActive:!1},a.sketchRef=s.a.createRef(),a}return Object(u.a)(e,t),Object(_.a)(e,[{key:"updateLatentSelector",value:function(){!0!==this.state.isMoving&&!0!==this.state.isActive||this.setState({sentLastPos:!1}),!0!==this.state.sentLastPos&&(this.props.updateLatentSelector({x:this.state.currentPercentX,y:this.state.currentPercentY}),this.setState({sentLastPos:!0}))}},{key:"calcPercent",value:function(){var t=this.state.currentPosX/this.state.canvasWidth,e=this.state.currentPosY/this.state.canvasHeight;t>1&&(t=1),t<0&&(t=0),e>1&&(e=1),e<0&&(e=0),this.setState({currentPercentX:t,currentPercentY:e})}},{key:"updateCanvasSize",value:function(){var t=this.sketchRef.current.offsetHeight,e=this.sketchRef.current.offsetWidth;this.setState({canvasWidth:e,canvasHeight:t})}},{key:"redrawCanvas",value:function(){var t=this.state.canvasHeight,e=this.state.canvasWidth;this.updateCanvasSize();var a=this.state.canvasHeight,n=(this.state.canvasWidth-e)/2,s=(a-t)/2;this.setState({currentPosX:this.state.currentPosX+n,currentPosY:this.state.currentPosY+s,targetX:this.state.targetX+n,targetY:this.state.targetY+s}),this.p5.resizeCanvas(this.state.canvasWidth,this.state.canvasHeight),this.p5.redraw()}},{key:"updateSounds",value:function(){var t=this.props.sounds;this.setState({soundNW:t.find(function(t){return"NW"===t.position})||{name:this.state.notConfiguredText},soundNE:t.find(function(t){return"NE"===t.position})||{name:this.state.notConfiguredText},soundSW:t.find(function(t){return"SW"===t.position})||{name:this.state.notConfiguredText},soundSE:t.find(function(t){return"SE"===t.position})||{name:this.state.notConfiguredText}})}},{key:"initP5",value:function(t){var e=this;this.setState({targetX:this.sketchRef.current.offsetWidth/2,targetY:this.sketchRef.current.offsetHeight/2}),this.sk.setup=function(){var t=e.sk.createCanvas(e.state.canvasWidth,e.state.canvasHeight);e.sk.noStroke(),t.parent(e.sketchRef.current.id)},this.sk.draw=function(){var t,a,n=0,s=1;e.sk.clear(),e.sk.mouseIsPressed&&e.sk.mouseX>=0&&e.sk.mouseX<=e.state.canvasWidth&&e.sk.mouseY>=0&&e.sk.mouseY<=e.state.canvasHeight&&e.setState({targetX:e.sk.mouseX,targetY:e.sk.mouseY}),a=e.state.targetY-e.state.currentPosY,t=e.state.targetX-e.state.currentPosX,e.setState({currentPosX:e.state.currentPosX+t*e.state.easing,currentPosY:e.state.currentPosY+a*e.state.easing}),Math.abs(a)>.5||Math.abs(t)>.5?e.setState({isMoving:!0}):e.setState({isMoving:!1}),!0===e.state.isMoving&&e.calcPercent();for(var i=0;i<e.state.circleRadius;i+=s)!0===e.state.isMoving?(n=Math.floor(5*Math.random()*Math.max(Math.abs(t),Math.abs(a))),s=2,e.sk.stroke(37+n,175+n,180+n),e.sk.strokeWeight(1)):(s=5,e.sk.stroke(37+n,175+n,180+n),e.sk.strokeWeight(3)),e.sk.noFill(),e.sk.ellipse(e.state.currentPosX,e.state.currentPosY,i,i)}}},{key:"handleMouseDown",value:function(){this.setState({isActive:!0})}},{key:"handleMouseUp",value:function(){this.setState({isActive:!1})}},{key:"handleTouchStart",value:function(){this.setState({isActive:!0})}},{key:"handleMouseEnd",value:function(){this.setState({isActive:!1})}},{key:"componentDidMount",value:function(){var t=this;window.addEventListener("resize",this.redrawCanvas.bind(this)),window.addEventListener("touchend",this.handleMouseUp.bind(this)),window.addEventListener("mouseup",this.handleMouseUp.bind(this)),setInterval(this.updateLatentSelector.bind(this),this.state.updateInterval),this.s=function(e){t.sk=e,t.updateSounds(),t.updateCanvasSize(),t.initP5()},this.p5=new P(this.s)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.redrawCanvas),window.addEveremoveEventListenerntListener("touchend",this.handleMouseUp),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var t=s.a.createElement(R.MDBContainer,null,s.a.createElement(R.MDBRow,null,s.a.createElement(R.MDBCol,{xs:"6",style:W.soundLeft},this.state.soundNW.name),s.a.createElement(R.MDBCol,{xs:"6",style:W.soundRight},this.state.soundNE.name)),s.a.createElement(R.MDBRow,null,s.a.createElement(R.MDBCol,{xs:"12"},s.a.createElement("div",{id:"sketch-area",ref:this.sketchRef,style:W.sketchArea,onMouseDown:this.handleMouseDown.bind(this),onMouseUp:this.handleMouseUp.bind(this)}))),s.a.createElement(R.MDBRow,null,s.a.createElement(R.MDBCol,{xs:"6",style:W.soundLeft},this.state.soundSW.name),s.a.createElement(R.MDBCol,{xs:"6",style:W.soundRight},this.state.soundSE.name)));return s.a.createElement("div",{style:W.wrapper},t)}}]),e}(n.Component),O={content:{padding:20,width:"100%"}},j=function(t){function e(t){var a;Object(r.a)(this,e),(a=Object(c.a)(this,Object(l.a)(e).call(this,t))).config={fileUrl:{storagePath:"https://storage.googleapis.com",bucket:"augmented-music-generation-dev",folderPath:"/latent_grids/test",gridName:"cleaned_grid_v3"},pitches:[{key:"A",value:36},{key:"W",value:40},{key:"S",value:44},{key:"E",value:48},{key:"D",value:52},{key:"R",value:56},{key:"F",value:60},{key:"T",value:64},{key:"G",value:68},{key:"Y",value:72},{key:"H",value:76},{key:"U",value:80},{key:"J",value:84}],latentSpaces:[[1,0,0,0]],velocity:127},a.state={loading:!1,serverError:!1,latentRatioNW:0,latentRatioNE:0,latentRatioSW:0,latentRatioSE:0,pitch:52},a.handleSamplerError=a.handleSamplerError.bind(Object(v.a)(Object(v.a)(a))),a.handleSamplerReady=a.handleSamplerReady.bind(Object(v.a)(Object(v.a)(a))),a.handleBuffersReady=a.handleBuffersReady.bind(Object(v.a)(Object(v.a)(a)));var n=a.props.data.latentSpaces,s="".concat(a.config.fileUrl.storagePath,"/").concat(a.config.fileUrl.bucket);return a.sampler={},n.forEach(function(t){a.soundUrls={},a.config.pitches.forEach(function(e){var n="".concat(t,"_pitch_").concat(e.value),s="".concat(a.config.fileUrl.folderPath,"/").concat(a.config.fileUrl.gridName,"_").concat(n,"_vel_").concat(a.config.velocity,".mp3"),i=new m.a.Frequency(e.value,"midi").toNote();a.soundUrls[i]=s}),a.sampler[t]=new m.a.Sampler(a.soundUrls,{release:1,volume:15,baseUrl:s,onload:a.handleSamplerReady(),onError:a.handleSamplerError()}).toMaster()}),a}return Object(u.a)(e,t),Object(_.a)(e,[{key:"handleSamplerReady",value:function(){console.log("sampler ready")}},{key:"handleSamplerError",value:function(t){}},{key:"handleBuffersReady",value:function(){console.log("buffer ready")}}]),Object(_.a)(e,[{key:"componentDidMount",value:function(){var t=this;setTimeout(function(){t.setState({loading:!1})},1e3)}},{key:"updatePitch",value:function(t){this.setState({pitch:t.pitch}),this.playSound()}},{key:"playSound",value:function(){var t=this.state.pitch,e="".concat(this.state.latentRatioNW)+"_".concat(this.state.latentRatioNE)+"_".concat(this.state.latentRatioSW)+"_".concat(this.state.latentRatioSE),a=new m.a.Frequency(t,"midi").toNote();if(e+"_pitch_"+t in this.soundUrls&&console.log("exists"),this.sampler[e])try{this.sampler[e].triggerAttack(a)}catch(n){console.log("error playing sound: "+e+"_pitch_"+t)}else console.log("does not exist: "+e+"_pitch_"+t)}},{key:"updateKeyPressed",value:function(t){var e=t.pitch;!0===t.active&&(this.setState({pitch:e}),this.playSound())}},{key:"updateLatentSelector",value:function(t){for(var e=parseFloat(t.x).toFixed(1),a=parseFloat(t.y).toFixed(1),n=[Math.round(10*(1-e)*(1-a))/10,Math.round(10*e*(1-a))/10,Math.round(10*(1-e)*a)/10,Math.round(10*e*a)/10],s=n.reduce(function(t,e){return t+e}),i=0;1!==s&&10!==i;){if(s<1){var o=n.indexOf(Math.max.apply(Math,Object(p.a)(n)));n[o]+=.1}if(s>1){var r=n.indexOf(Math.max.apply(Math,Object(p.a)(n)));n[r]-=.1}s=n.reduce(function(t,e){return t+e}),i++}n=n.map(function(t){return parseFloat(t).toFixed(1)}),this.setState({latentRatioNW:n[0],latentRatioNE:n[1],latentRatioSW:n[2],latentRatioSE:n[3]}),this.playSound()}},{key:"render",value:function(){var t;return t=!0===this.state.loading?s.a.createElement("div",{className:"loader border-top-default medium fast"}):!0===this.state.serverError?s.a.createElement("div",null,"Server Unreachable",s.a.createElement("br",null),s.a.createElement("br",null),"Try Reloading App"):s.a.createElement("div",null,s.a.createElement(x,{updateLatentSelector:this.updateLatentSelector.bind(this),sounds:this.props.data.sounds}),s.a.createElement("br",null),s.a.createElement(M,{min:36,max:84,step:4,handleChange:this.updatePitch.bind(this)})),s.a.createElement("div",{style:O.content},t)}}]),e}(n.Component),C=a(82),N=a(83),U=(a(241),{latentSpaces:N,sounds:[{name:"Strings",position:"NW"},{name:"Bells",position:"NE"},{name:"Synth",position:"SW"},{name:"Guitar",position:"SE"}]}),Y=function(t){function e(){var t,a;Object(r.a)(this,e);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(a=Object(c.a)(this,(t=Object(l.a)(e)).call.apply(t,[this].concat(s)))).appState=C.a.object({}),a}return Object(u.a)(e,t),Object(_.a)(e,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(d.a,null),s.a.createElement("div",{className:"App"},s.a.createElement("main",{className:"App-main"},s.a.createElement(j,{data:U}))))}}]),e}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(244),a(246),a(248);o.a.render(s.a.createElement(Y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})},83:function(t){t.exports=["0.0_0.0_0.0_1.0","0.0_0.0_0.1_0.9","0.0_0.0_0.2_0.8","0.0_0.0_0.3_0.7","0.0_0.0_0.4_0.6","0.0_0.0_0.5_0.5","0.0_0.0_0.6_0.4","0.0_0.0_0.7_0.3","0.0_0.0_0.8_0.2","0.0_0.0_0.9_0.1","0.0_0.0_1.0_0.0","0.0_0.1_0.0_0.9","0.0_0.1_0.1_0.8","0.0_0.1_0.2_0.7","0.0_0.1_0.3_0.6","0.0_0.1_0.4_0.5","0.0_0.2_0.0_0.8","0.0_0.2_0.1_0.7","0.0_0.2_0.2_0.6","0.0_0.3_0.0_0.7","0.0_0.3_0.1_0.6","0.0_0.4_0.0_0.6","0.0_0.4_0.1_0.5","0.0_0.5_0.0_0.5","0.0_0.6_0.0_0.4","0.0_0.7_0.0_0.3","0.0_0.8_0.0_0.2","0.0_0.9_0.0_0.1","0.0_1.0_0.0_0.0","0.1_0.0_0.5_0.4","0.1_0.0_0.6_0.3","0.1_0.0_0.7_0.2","0.1_0.0_0.8_0.1","0.1_0.0_0.9_0.0","0.1_0.1_0.2_0.6","0.1_0.1_0.3_0.5","0.1_0.1_0.4_0.4","0.1_0.1_0.5_0.3","0.1_0.1_0.6_0.2","0.1_0.2_0.1_0.6","0.1_0.2_0.2_0.5","0.1_0.2_0.3_0.4","0.1_0.3_0.1_0.5","0.1_0.3_0.2_0.4","0.1_0.4_0.1_0.4","0.1_0.5_0.0_0.4","0.1_0.5_0.1_0.3","0.1_0.6_0.0_0.3","0.1_0.6_0.1_0.2","0.1_0.7_0.0_0.2","0.1_0.8_0.0_0.1","0.1_0.9_0.0_0.0","0.2_0.0_0.6_0.2","0.2_0.0_0.7_0.1","0.2_0.0_0.8_0.0","0.2_0.1_0.4_0.3","0.2_0.1_0.5_0.2","0.2_0.1_0.6_0.1","0.2_0.2_0.2_0.2","0.2_0.2_0.2_0.4","0.2_0.2_0.3_0.3","0.2_0.2_0.4_0.2","0.2_0.3_0.2_0.3","0.2_0.4_0.1_0.3","0.2_0.4_0.2_0.2","0.2_0.5_0.1_0.2","0.2_0.6_0.0_0.2","0.2_0.6_0.1_0.1","0.2_0.7_0.0_0.1","0.2_0.8_0.0_0.0","0.3_0.0_0.6_0.1","0.3_0.0_0.7_0.0","0.3_0.1_0.4_0.2","0.3_0.1_0.5_0.1","0.3_0.2_0.3_0.2","0.3_0.3_0.2_0.2","0.3_0.4_0.1_0.2","0.3_0.5_0.1_0.1","0.3_0.6_0.0_0.1","0.3_0.7_0.0_0.0","0.4_0.0_0.5_0.1","0.4_0.0_0.6_0.0","0.4_0.1_0.4_0.1","0.4_0.2_0.2_0.2","0.4_0.2_0.3_0.1","0.4_0.3_0.2_0.1","0.4_0.4_0.1_0.1","0.4_0.5_0.0_0.1","0.4_0.6_0.0_0.0","0.5_0.0_0.5_0.0","0.5_0.1_0.3_0.1","0.5_0.1_0.4_0.0","0.5_0.1_0.5_0.1","0.5_0.2_0.2_0.1","0.5_0.3_0.1_0.1","0.5_0.4_0.1_0.0","0.5_0.5_0.0_0.0","0.5_0.5_0.1_0.1","0.6_0.0_0.4_0.0","0.6_0.1_0.2_0.1","0.6_0.1_0.3_0.0","0.6_0.2_0.1_0.1","0.6_0.2_0.2_0.0","0.6_0.3_0.1_0.0","0.6_0.4_0.0_0.0","0.7_0.0_0.3_0.0","0.7_0.1_0.2_0.0","0.7_0.2_0.1_0.0","0.7_0.3_0.0_0.0","0.8_0.0_0.2_0.0","0.8_0.1_0.1_0.0","0.8_0.2_0.0_0.0","0.9_0.0_0.1_0.0","0.9_0.1_0.0_0.0","1.0_0.0_0.0_0.0"]},85:function(t,e,a){t.exports=a(251)},90:function(t,e,a){}},[[85,2,1]]]);
//# sourceMappingURL=main.4592978a.chunk.js.map